'use strict';

/**
 * Evaluates the cumulative distribution function (CDF) for a Rice distribution.
 *
 * @param {number} x - input value
 * @param {number} nu - noncentrality parameter
 * @param {number} sigma - scale parameter
 * @returns {number} evaluated CDF
 */
function cdf(x, nu, sigma) {
    if (sigma <= 0) {
        throw new Error('Scale parameter `sigma` must be positive');
    }
    const z = x / sigma;
    const bessel = require('@stdlib/math/base/special/besseli');
    const normal = require('@stdlib/stats/base/dists/normal/cdf');
    return normal.cdf(z, nu / sigma, 1) - Math.exp(-z * z / 2 - nu * nu / (2 * sigma * sigma)) * bessel(z * nu / sigma, 1);
}

module.exports = cdf;
